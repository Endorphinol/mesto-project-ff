{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/index.js"],"sourcesContent":["// Открыть модальное окно.\nexport function openModal(currentModal) {\n    currentModal.classList.add('popup_is-opened');\n    document.addEventListener('keydown', closeModalEscape);\n};\n// Закрыть модальное окно.\nexport function closeModal(currentModal) {\n    currentModal.classList.remove('popup_is-opened');\n    document.removeEventListener('keydown', closeModalEscape);\n\n};\n// Закрыть модальное окно по оверлею.\nexport function closeModalOverlay(evt) {\n    const currentModal = document.querySelector('.popup_is-opened');\n    if (evt.target === currentModal) {\n        closeModal(currentModal);\n    }\n};\n// Закрыть модальное окно по Escape.\nexport function closeModalEscape(evt) {\n    if (evt.key === 'Escape') {\n        const currentModal = document.querySelector('.popup_is-opened');\n        if (currentModal) {\n            closeModal(currentModal);\n        }\n    }\n};\n\n","import { openModal } from \"./modal\";\n\n// Функция создания карточки.\nexport function createCard(card, deleteCard, addLike, userId, openPopupImage) {\n    const templateList = document.querySelector('#card-template').content;\n    const templateCard = templateList.querySelector('.card').cloneNode(true);\n    const likeButton = templateCard.querySelector('.card__like-button');\n    const image = templateCard.querySelector('.card__image');\n    const likeCount = templateCard.querySelector('.card__count');\n    likeCount.textContent = card.likes ? card.likes.length : 0;\n    templateCard.querySelector('.card__title').textContent = card.name;\n    const isLiked = likeButton.classList.contains('card__like-button_is-active');\n    const popupDelete = templateCard.querySelector('.popup_type_trash');\n    templateCard.querySelector('.card__like-button').addEventListener('click', () => addLike(card._id, isLiked)\n        .then((data) => {\n            likeCount.textContent = data.likes.length;\n            likeButton.classList.toggle('card__like-button_is-active');\n        })\n        .catch((error) => {\n            console.log('Ошибка', error);\n        })\n    );\n\n    // Проверка идентификатора пользователя с остальными пользователями.\n    if (userId !== card.owner._id) {\n        templateCard.querySelector('.card__delete-button').classList.remove('card__delete-button');\n    } else {\n        templateCard.querySelector('.card__delete-button').addEventListener('click', () => deleteCard(card._id)\n            .then(() => {\n                openModal(popupDelete);\n                templateCard.querySelector('.popup__button').addEventListener('click', function () {\n                    templateCard.remove();\n                })\n            })\n            .catch((error) => {\n                console.log('Ошибка', error);\n            })\n        )\n    };\n\n    // Открытие попапа крупного изображения.\n    image.addEventListener('click', function () {\n        openPopupImage(card.link, card.name)\n    });\n\n    // Создание мелких карточек на сайте.\n    image.src = card.link;\n    image.alt = card.name;\n    return templateCard;\n};","// Проверка валидации.\nexport const isValid = (formElement, inputElement, configValidation) => {\n    if (inputElement.validity.patternMismatch) {\n        inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n    } else {\n        inputElement.setCustomValidity(\"\");\n    }\n    if (!inputElement.validity.valid) {\n        showInputError(formElement, inputElement, inputElement.validationMessage, configValidation);\n    } else {\n        hideInputError(formElement, inputElement, configValidation);\n    }\n};\n\n// Функция отображения ошибок валидации.\nexport const showInputError = (formElement, inputElement, errorMessage, configValidation) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    inputElement.classList.add(configValidation.errorClass);\n    errorElement.textContent = errorMessage;\n    errorElement.classList.add(configValidation.inputErrorClass);\n};\n\n// Функция скрытия ошибок валидации.\nexport const hideInputError = (formElement, inputElement, configValidation) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    inputElement.classList.remove(configValidation.errorClass);\n    errorElement.textContent = '';\n    errorElement.classList.remove(configValidation.inputErrorClass);\n};\n\n// Функция отключения кнопки.\nconst disableSubmitButton = (button, config) => {\n    button.disabled = true;\n    button.classList.add(config.inactiveButtonClass);\n};\n\n// Функция включения кнопок.\nconst enableSubmitButton = (button, config) => {\n    button.disabled = false;\n    button.classList.remove(config.inactiveButtonClass);\n};\n\n// Проверка на не валидность хотя бы одного поля ввода.\nexport const hasInvalidInput = (inputList) => {\n    return inputList.some((inputElement) => {\n        return !inputElement.validity.valid;\n    })\n};\n\n// Проверка на включение и выключение кнопки.\nexport const toggleButtonState = (inputList, buttonElement, configValidation) => {\n    if (hasInvalidInput(inputList)) {\n        disableSubmitButton(buttonElement, configValidation);\n    } else {\n        enableSubmitButton(buttonElement, configValidation);\n    }\n};\n\n// Поиск всех полей ввода и кнопки обход всех полей ввода и добавление слушателей.\nexport const setEventListeners = (formElement, configValidation) => {\n    const inputList = Array.from(formElement.querySelectorAll(configValidation.inputSelector));\n    const buttonElement = formElement.querySelector(configValidation.submitButtonSelector);\n    toggleButtonState(inputList, buttonElement, configValidation);\n    inputList.forEach((inputElement) => {\n        inputElement.addEventListener('input', () => {\n            isValid(formElement, inputElement, configValidation);\n            toggleButtonState(inputList, buttonElement, configValidation);\n        });\n    });\n};\n\n// Поиск всех форм на странице и передача их функции слушателю полей.\nexport const enableValidation = (configValidation) => {\n    const formList = Array.from(document.querySelectorAll(configValidation.formSelector));\n    formList.forEach((formElement) => {\n        setEventListeners(formElement, configValidation);\n    });\n};\n\n// Функция очистки полей валидации.\nexport function clearValidation(formElement, configValidation) {\n    const inputList = Array.from(formElement.querySelectorAll(configValidation.inputSelector));\n    const buttonElement = formElement.querySelector(configValidation.submitButtonSelector);\n\n    inputList.forEach((inputElement) => {\n        hideInputError(formElement, inputElement, configValidation);\n    });\n\n    disableSubmitButton(buttonElement, configValidation);\n};","// Конфигурация для подставки идентификатора и токена.\nexport const config = {\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-35',\n    headers: {\n        authorization: '08a2006d-1e8e-4054-8f6b-d1d1b6dfc2ea',\n        'Content-Type': 'application/json'\n    }\n};\n\n// Функция для проверки обьекта ответа.\nexport const handleResponse = (response) => {\n    if (response.ok) {\n        return response.json();\n    }\n    return Promise.reject(`Ошибка: ${response.status}`);\n};\n\n// Проверка фотографии для подтверждения.\nexport const updatePhotoCheck = (url) => {\n    return fetch(`${url.value}`, {\n        method: 'HEAD',\n    })\n        .then(response => {\n            if (!response.ok) {\n                console.log('Произошла ошибка');\n            }\n            const contentType = response.headers.get('Content-Type');\n            if (!contentType.startsWith('image/')) {\n                console.log('URL не является картинкой');\n            }\n        })\n};\n\n// Обновление фотографии пользователя на сайте.\nexport const updatePhoto = (newAvatarPhoto) => {\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\n        method: 'PATCH',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            avatar: `${newAvatarPhoto.value}`\n        })\n    })\n        .then(handleResponse)\n};\n\n// Редактирование имени и деятельности пользователя в профиле.\nexport const updateProfile = (nameData, aboutData,) => {\n    return fetch(`${config.baseUrl}/users/me`, {\n        method: 'PATCH',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            name: nameData,\n            about: aboutData,\n        })\n    })\n        .then(handleResponse)\n};\n\n// Добавление карточки на сайт.\nexport const addCard = (nameCard, linkCard) => {\n    return fetch(`${config.baseUrl}/cards`, {\n        method: 'POST',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            name: nameCard,\n            link: linkCard,\n        })\n    })\n        .then(handleResponse)\n};\n\n// Загрузка информации о пользователе с сервера.\nexport const getUserData = () => {\n    return fetch(`${config.baseUrl}/users/me`, {\n        method: 'GET',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n        }\n    })\n        .then(handleResponse)\n};\n\n// Загрузка карточек с сервера.\nexport const getInitialCards = () => {\n    return fetch(`${config.baseUrl}/cards`, {\n        method: 'GET',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n        }\n    })\n        .then(handleResponse)\n};\n\n// Удаление карточки по нажатию.\nexport const deleteCard = (cardId) => {\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\n        method: 'DELETE',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n        }\n    })\n        .then(handleResponse)\n};\n\n// Функция добавления лайка на к арточку.\nexport const addLike = (cardId, isLiked) => {\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n        method: isLiked ? 'DELETE' : 'PUT',\n        headers: {\n            authorization: `${config.headers.authorization}`,\n        }\n    })\n        .then(handleResponse)\n};  ","import '../pages/index.css';\nimport { createCard } from './card.js';\nimport { openModal, closeModal, closeModalOverlay } from './modal.js';\nimport { enableValidation, clearValidation } from './validation.js';\nimport { config, updatePhotoCheck, updatePhoto, updateProfile, addCard, getUserData, getInitialCards, deleteCard, addLike } from './api.js';\n\nconst buttonEditProfile = document.querySelector('.profile__edit-button');\nconst popupEditProfile = document.querySelector('.popup_type_edit');\nconst buttonAddCard = document.querySelector('.profile__add-button');\nconst popupAddCard = document.querySelector('.popup_type_new-card');\nconst popupNewAvatar = document.querySelector('.popup_type_new_avatar');\nconst avatar = document.querySelector('.profile__image');\nconst nameInput = document.querySelector('.popup__input_type_name');\nconst aboutInput = document.querySelector('.popup__input_type_description');\nconst nameTitle = document.querySelector('.profile__title');\nconst jobTitle = document.querySelector('.profile__description');\nconst formEditProfile = document.querySelector('.popup__form[name=\"edit-profile\"]');\nconst formAddCard = document.querySelector('.popup__form[name=\"new-place\"]');\nconst popupImage = document.querySelector('.popup__image');\nconst popupImageOpen = document.querySelector('.popup_type_image');\nconst popupImageDescription = document.querySelector('.popup__caption');\nconst cardList = document.querySelector('.places__list');\nconst formPhotoProfile = document.querySelector('.popup__form[name=\"new-avatar\"]');\nconst newAvatarPhoto = document.querySelector('.popup__input_type_avatar');\n\n/**\n * Объект опции:\n * 1. Элемент формы.\n * 2. Элемент поля ввода.\n * 3. Кнопка отправки формы.\n * 4. Класс для отключения кнопки.\n * 5. Класс для выделения попапа цветом.\n * 6. Класс для отображения попапа.\n */\n\nconst configValidation = {\n    formSelector: '.popup__form',\n    inputSelector: '.popup__input',\n    submitButtonSelector: '.popup__button',\n    inactiveButtonClass: 'popup__button_disabled',\n    inputErrorClass: 'popup__input_type_error',\n    errorClass: 'popup__error_visible',\n};\n\n// Открытие модального окна по нажатию на аватарку. \navatar.addEventListener('click', function () {\n    clearValidation(formEditProfile, configValidation);\n    openModal(popupNewAvatar);\n});\n\n// Открытие модального окна по нажатию на кнопку добавления карточки.\nbuttonAddCard.addEventListener('click', function () {\n    clearValidation(formAddCard, configValidation);\n    openModal(popupAddCard);\n});\n\n// Открытие модального окна по нажатию на кнопку редактирования карточки.\nbuttonEditProfile.addEventListener('click', function () {\n    clearValidation(formEditProfile, configValidation);\n    nameInput.value = nameTitle.textContent;\n    aboutInput.value = jobTitle.textContent;\n    openModal(popupEditProfile);\n});\n\n// Поиск кнопки закрытия по всей странице для закрытия модального окна.\ndocument.addEventListener('click', function (evt) {\n    if (evt.target.classList.contains('popup__close')) {\n        const currentModal = evt.target.closest('.popup');\n        closeModal(currentModal);\n    }\n});\n\n// Открытие модального окна с изображением.\nfunction openPopupImage(imageSrc, imageAlt) {\n    popupImage.src = imageSrc;\n    popupImage.alt = imageAlt;\n    popupImageDescription.textContent = imageAlt;\n    openModal(popupImageOpen);\n};\n\n// Закрытие модального окна по оверлею.\ndocument.addEventListener('click', closeModalOverlay);\n\n// Запуск функции поиска всех форм на странице.\nenableValidation(configValidation);\n\n// Обновление фотографии.\nformPhotoProfile.addEventListener('submit', function (evt) {\n    evt.preventDefault();\n\n    const buttonElement = formPhotoProfile.querySelector('.popup__button');\n    buttonElement.textContent = \"Сохранение...\";\n    buttonElement.disabled = true;\n    updatePhotoCheck(newAvatarPhoto)\n        .catch((error) => {\n            console.log('Ошибка', error);\n        })\n    updatePhoto(newAvatarPhoto)\n        .then((data) => {\n            avatar.style.backgroundImage = `url(${data.avatar})`;\n        })\n        .finally(() => {\n            buttonElement.textContent = \"Сохранить\";\n            buttonElement.disabled = false;\n            closeModal(popupNewAvatar);\n        })\n        .catch((error) => {\n            console.log('Ошибка:', error);\n        })\n});\n\n// Редактирование профиля.\nformEditProfile.addEventListener('submit', function (evt) {\n    evt.preventDefault();\n\n    nameTitle.textContent = nameInput.value;\n    jobTitle.textContent = aboutInput.value;\n\n    const buttonElement = formEditProfile.querySelector('.popup__button');\n    buttonElement.textContent = \"Сохранение...\"\n    buttonElement.disabled = true;\n\n    updateProfile(nameInput.value, aboutInput.value)\n        .then((data) => {\n            nameTitle.textContent = data.name;\n            jobTitle.textContent = data.about;\n        })\n        .finally(() => {\n            buttonElement.textContent = \"Сохранить\"\n            buttonElement.disabled = false;\n            closeModal(popupEditProfile);\n        })\n        .catch((error) => {\n            console.log('Ошибка', error);\n        })\n});\n\n// Добавление карточки.\nformAddCard.addEventListener('submit', function (evt) {\n    evt.preventDefault();\n\n    const buttonElement = formAddCard.querySelector('.popup__button');\n    const item = {\n        name: document.querySelector('.popup__input_type_card-name').value,\n        link: document.querySelector('.popup__input_type_url').value,\n    }\n    buttonElement.textContent = \"Сохранение...\";\n    buttonElement.disabled = true;\n\n    addCard(item.name, item.link)\n        .then((data) => {\n            const newCard = createCard(data,\n                deleteCard,\n                addLike,\n                data.owner._id,\n                openPopupImage);\n            cardList.prepend(newCard);\n        })\n        .finally(() => {\n            buttonElement.textContent = \"Сохранить\"\n            buttonElement.disabled = false;\n            formAddCard.reset();\n            closeModal(popupAddCard);\n        })\n        .catch((error) => {\n            console.log('Ошибка', error);\n        })\n});\n\nconst promises = [getUserData(), getInitialCards()];\nPromise.all(promises)\n    .then(([userData, initialCards]) => {\n        document.querySelector('.profile__image').style.backgroundImage = `url(${userData.avatar})`;\n        nameTitle.textContent = userData.name;\n        jobTitle.textContent = userData.about;\n        const userId = userData._id;\n        initialCards.forEach(function (item) {\n            const newCard = createCard(item, deleteCard, addLike, userId, openPopupImage);\n            cardList.append(newCard);\n        })\n    })\n    .catch((error) => {\n        console.log('Ошибка', error);\n    });"],"names":["openModal","currentModal","classList","add","document","addEventListener","closeModalEscape","closeModal","remove","removeEventListener","evt","key","querySelector","createCard","card","deleteCard","addLike","userId","openPopupImage","templateCard","content","cloneNode","likeButton","image","likeCount","textContent","likes","length","name","isLiked","contains","popupDelete","_id","then","data","toggle","catch","error","console","log","owner","link","src","alt","hideInputError","formElement","inputElement","configValidation","errorElement","concat","id","errorClass","inputErrorClass","disableSubmitButton","button","config","disabled","inactiveButtonClass","toggleButtonState","inputList","buttonElement","some","validity","valid","hasInvalidInput","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","handleResponse","response","ok","json","Promise","reject","status","cardId","fetch","method","headers","authorization","buttonEditProfile","popupEditProfile","buttonAddCard","popupAddCard","popupNewAvatar","avatar","nameInput","aboutInput","nameTitle","jobTitle","formEditProfile","formAddCard","popupImage","popupImageOpen","popupImageDescription","cardList","formPhotoProfile","newAvatarPhoto","formSelector","imageSrc","imageAlt","value","target","closest","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","enableValidation","preventDefault","url","get","startsWith","body","JSON","stringify","updatePhoto","style","backgroundImage","finally","nameData","aboutData","about","nameCard","linkCard","item","newCard","prepend","reset","promises","all","_ref","_ref2","userData","initialCards","append"],"sourceRoot":""}